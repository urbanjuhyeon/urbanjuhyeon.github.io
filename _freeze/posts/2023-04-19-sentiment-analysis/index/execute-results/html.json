{
  "hash": "61ee0b308731dafa97cac83b02f28cd8",
  "result": {
    "markdown": "---\ntitle: \"한국어 감성 분석 비교: 네이버 vs 구글\"\ndescription: |\n  대표적인 한국어 감성 분석 API를 제공하는 구글과 네이버 성능 비교\ndate: \"2023-04-19\"\ncategories: [R]\nimage: \"image/plot_conf_mat_naver.png\"\n---\n\n\n# 들어가기\n\n한국어 자연어 처리에서 감성 분석 서비스를 하는 구글과 네이버의 성능을 비교한다. \n\n------------------------------------------------------------------------\n\n# 1. 데이터 준비하기\n\n분석에 필요할 패키지를 불러온다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(\n  \"tidyverse\",  \"tidytext\", \"data.table\", \"knitr\", \"gt\", \"scales\", \"cvms\", \"DT\",\n  \"httr\", \"jsonlite\", \"future\", \"furrr\")\n```\n:::\n\n\n분석에 쓸 데이터를 [여기](data/sample.csv)에서 다운 받아 불러온다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndb_sent_1a <- fread('data/sample.csv')\n```\n:::\n\n\n데이터는 구글 리뷰 문장(sent_content)을 긍정과 중립, 부정으로 라벨링(label)하고 구글 자연어 처리의 감성분석 점수(score)로 구성된다.\n\n\n::: {.cell}\n::: {.cell-output-display}\n|sent_content              |label | senti_score_google|\n|:-------------------------|:-----|------------------:|\n|탁트인 한강 전망이 좋아요 |긍정  |                0.9|\n|물난리 후 첫주말에 갔는데 |중립  |               -0.1|\n|교통,주차 너무힘들어요    |부정  |                0.0|\n:::\n:::\n\n\n위 데이터에서 긍정과 중립, 부정을 각각 200개씩 무작위로 샘플링한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(777) # 난수 고정\n\ndb_sent_1b <- db_sent_1a %>% \n  group_by(label) %>% \n  sample_n(200) %>% ungroup() %>%\n  arrange(label) %>%\n  mutate(id = row_number())\n```\n:::\n\n\n# 2. 감성분석\n\n## 2.1. 네이버 감성분석\n\n### 감성분석 준비\n\nCLOVA Sentiment 서비스 설명과 가이드라인은 [여기](https://medium.com/naver-cloud-platform/%EC%9D%B4%EB%A0%87%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%84%B8%EC%9A%94-%ED%85%8D%EC%8A%A4%ED%8A%B8-%EA%B0%90%EC%A0%95-%EB%B6%84%EC%84%9D-%EC%84%9C%EB%B9%84%EC%8A%A4-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-clova-sentiment-%ED%99%9C%EC%9A%A9%EA%B8%B0-5d9db7b0209b)에서 볼 수 있다. 콘솔 접속과 서비스 활성화, 인증정보 등을 따라하면 된다.\n\n### R을 활용한 네이버 감성분석\n\n아래 코드로 할당받은 네이버 감성분석 API를 활용하여 샘플 데이터를 감성분석한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define API endpoint and headers\nurl <- \"https://naveropenapi.apigw.ntruss.com/sentiment-analysis/v1/analyze\"\nclient_id = \"\"     # 할당된 클라이언트 ID\nclient_secret = \"\" # 할당된 API key\n\nheaders_user <- c(\n  \"X-NCP-APIGW-API-KEY-ID\" = client_id,\n  \"X-NCP-APIGW-API-KEY\" = client_secret,\n  \"Content-Type\" = \"application/json\"\n)\n\ndb_sent_1c <- db_sent_1b %>%\n  group_split(id)\n\n\ndb_sent_2a <- rbindlist(\n  future_map(db_sent_1c, function(x){\n    \n    sent_content_input <- x$sent_content\n    \n    seti_analysis_respon <- POST(\n      url = \"https://naveropenapi.apigw.ntruss.com/sentiment-analysis/v1/analyze\",\n      body = toJSON(list(content = sent_content_input) , auto_unbox = TRUE, pretty = TRUE), \n      add_headers(.headers = headers_user),\n      encode = \"json\") %>% \n      content()\n    \n    doc_dt <- data.table(\n      doc_content = sent_content_input,\n      doc_senti = seti_analysis_respon$document$sentiment,\n      doc_confi_neg = seti_analysis_respon$document$confidence$negative,\n      doc_confi_posi = seti_analysis_respon$document$confidence$positive,\n      doc_confi_neut = seti_analysis_respon$document$confidence$neutral\n    )\n    \n    # create a data.table of sentence-level information\n    sent_dt <- data.table(\n      sent_content = sapply(seti_analysis_respon$sentences, function(x) x$content),\n      sent_offset = sapply(seti_analysis_respon$sentences, function(x) x$offset),\n      sent_length = sapply(seti_analysis_respon$sentences, function(x) x$length),\n      sent_sentiment = sapply(seti_analysis_respon$sentences, function(x) x$sentiment),\n      sent_confi_neg = sapply(seti_analysis_respon$sentences, function(x) x$confidence$negative),\n      sent_confi_posi = sapply(seti_analysis_respon$sentences, function(x) x$confidence$positive),\n      sent_confi_neut = sapply(seti_analysis_respon$sentences, function(x) x$confidence$neutral),\n      sent_highlight_offset = sapply(seti_analysis_respon$sentences, function(x) x$highlights[[1]]$offset),\n      sent_highlight_length = sapply(seti_analysis_respon$sentences, function(x) x$highlights[[1]]$length)\n    )\n    \n    print(\"end\")\n    \n    comb_dt <- cbind(id = x$id, doc_dt, sent_dt)\n    \n  }))\n```\n:::\n\n\n감성분석 결과는 다음과 같다. 여기서 doc와 senti로 시작하면 각각 문서와 그 문서를 구성하는 문장으로 나타낸다. 네이버 클로버 감성분석은 분석하는 문서(doc)의 문장을 자동으로 분류해준다.\n\n\n::: {.cell}\n::: {.cell-output-display}\n| id|doc_content                  |doc_senti | doc_confi_neg| doc_confi_posi| doc_confi_neut|sent_content                 | sent_offset| sent_length|sent_sentiment | sent_confi_neg| sent_confi_posi| sent_confi_neut| sent_highlight_offset| sent_highlight_length|\n|--:|:----------------------------|:---------|-------------:|--------------:|--------------:|:----------------------------|-----------:|-----------:|:--------------|--------------:|---------------:|---------------:|---------------------:|---------------------:|\n|  1|그늘도 많고 쉴자리도 많아요. |positive  |     0.0002367|       99.99958|      0.0001859|그늘도 많고 쉴자리도 많아요. |           0|          16|positive       |      0.0000142|       0.9999746|       0.0000112|                     0|                    15|\n|  2|공기좋음                     |positive  |     0.0367223|       99.95812|      0.0051644|공기좋음                     |           0|           4|positive       |      0.0022033|       0.9974868|       0.0003099|                     0|                     4|\n|  3|맑은하늘을 맘껏볼수있는곳    |positive  |     0.0001375|       99.99956|      0.0003061|맑은하늘을 맘껏볼수있는곳    |           0|          13|positive       |      0.0000083|       0.9999734|       0.0000184|                     0|                    13|\n:::\n:::\n\n\n## 2.2. 구글 감성분석\n\n구글 감성 분석은 [여기](https://brunch.co.kr/@mapthecity/25)에서 자세히 배울 수 있다. 네이버 감성분석과 같이 R를 활용하여 구글 감성 분석 API를 쓰는 방법은 추후에 업데이트하고자 한다.\n\n# 3. 감성분석 비교\n\n## 3.1. 분류 정확도 요약\n\n네이버 감성분석은 F1 점수가 0.84로 구글 감성분석 0.642보다 더 높았다.\n\n\n::: {.cell}\n::: {.cell-output-display}\n|지표              |네이버 감성분석 |구글 감성분석 |구글 감성분석(조정 후) |\n|:-----------------|:---------------|:-------------|:----------------------|\n|F1-score          |0.840           |0.642         |0.718                  |\n|Balanced Accuracy |0.879           |0.736         |0.788                  |\n:::\n:::\n\n\n## 3.2. 비교 데이터셋 만들기\n\n분석할 감성분석 결과 DB를 만들어준다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndb_sent_2b <- unique(db_sent_2a, by = \"id\") %>%\n  select(id, doc_senti)\n\ndb_sent_f <- db_sent_1b %>%\n  left_join(db_sent_2b, by = \"id\") %>%\n  mutate(\n    senti_label_google = case_when(\n      between(senti_score_google, 0.25, 1) ~ \"긍정\",\n      between(senti_score_google, -0.25, 0.25) ~ \"중립\",\n      TRUE ~ \"부정\"),\n    senti_label_naver = case_when(\n      doc_senti == \"positive\" ~ \"긍정\",\n      doc_senti == \"neutral\" ~ \"중립\",\n      TRUE ~ \"부정\")\n    ) %>%\n  select(id, sent_content, senti_label_google, senti_label_naver, label) %>%\n    mutate_at(c(\"senti_label_google\", \"senti_label_naver\", \"label\"), factor, levels = c(\"부정\", \"중립\", \"긍정\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nconf_mat_google <- confusion_matrix(\n  targets = db_sent_f$label,\n  predictions = db_sent_f$senti_label_google\n  )\n\nconf_mat_naver <- confusion_matrix(\n  targets = db_sent_f$label,\n  predictions = db_sent_f$senti_label_naver\n  )\n```\n:::\n\n\n## 3.3. 감성분석 상세\n\n### 네이버 감성분석\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_confusion_matrix(conf_mat_naver$`Confusion Matrix`[[1]], \n                      class_order = c(\"긍정\", \"중립\", \"부정\"),\n                      add_sums = TRUE)  +\n  ggplot2::labs(title = \"네이버 감성분석 분류 정확도 결과\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in plot_confusion_matrix(conf_mat_naver$`Confusion Matrix`[[1]], :\n'ggimage' is missing. Will not plot arrows and zero-shading.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in plot_confusion_matrix(conf_mat_naver$`Confusion Matrix`[[1]], :\n'rsvg' is missing. Will not plot arrows and zero-shading.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in plot_confusion_matrix(conf_mat_naver$`Confusion Matrix`[[1]], :\n'ggnewscale' is missing. Will not use palette for sum tiles.\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n### 잘못 분류한 문장\n#### 중립 문장을 긍정으로 잘못 분류한 경우\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-4340c814079ac0265ac2\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-4340c814079ac0265ac2\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\"],[10,25,29,34,51,54,62,66,70,75,85,96,98,107,111,122,146,148,150,151,161,176,178,198,199],[\"늘 산책하는 공원\",\"산책하기에 딱좋아요\",\"도움이 되는 곳입니다\",\"가을 하늘이 높고 좋네요.\",\"초등 남아가 아주 재밌어해요\",\"여기 자주 오세여!\",\"가을 지니 가야 좋을듯\",\"작은동산 좋음\",\"의외의 장소에서 기쁨을\",\"애완견 데리고 산책하기 좋은 곳\",\"아이들 놀기 좋은곳입니다.\",\"배드민턴 맛집\",\"둘레길 걷기도 좋습니다.\",\"주말마다 농구하는곳\",\"멍때리고 앉아있기 좋음\",\"아기있는 가족에게 강추\",\"밤에 야경이 그만입니다\",\"멋짐ㅋ 섬나라로 초대\",\"산책하기 좋죠\",\"갈대가 진짜예뻣어요\",\"사람도 많고 잘꾸며놓았습니다.\",\"지역 산책로로서는 최고\",\"러닝 산책 하러 가기 좋아요.\",\"날이좋아서ㅡ\",\"도심에서 이런분위기 좋아요\"],[\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\",\"긍정\"],[\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\"],[0.0013434663,0.12769963,0.32105058,2.0465677,0.06899399,0.6806139,0.7333088,0.5744711,0.12775072,0.0029285706,0.090973206,0.74002826,0.0037368052,0.057509724,0.007763055,0.6817497,0.0020598955,0.012779236,0.23061922,0.04104916,3.7606583,0.21470729,0.39341545,0.004618701,0.056183964],[99.99676,99.80855,99.48768,97.64394,99.87591,99.14951,99.13406,99.37123,99.781,99.99578,99.79807,99.223465,99.9918,99.92091,99.98771,99.22495,99.996635,99.9676,99.73022,99.92266,96.13996,99.64698,99.54218,99.99437,99.83218],[0.0018964893,0.06374981,0.19127089,0.30948737,0.05509995,0.16987474,0.13262598,0.054298148,0.09125301,0.0012928466,0.1109565,0.03651005,0.0044659935,0.021576924,0.0045294543,0.09330027,0.001301773,0.019623445,0.039160945,0.036290936,0.09938005,0.13831398,0.06439831,0.0010085935,0.11164253]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>id<\\/th>\\n      <th>sent_content<\\/th>\\n      <th>label<\\/th>\\n      <th>senti_label_naver<\\/th>\\n      <th>doc_confi_posi<\\/th>\\n      <th>doc_confi_neut<\\/th>\\n      <th>doc_confi_neg<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"pageLength\":5,\"lengthMenu\":[10,20,50],\"dom\":\"tp\",\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,5,6,7]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndb_sent_2b <- unique(db_sent_2a, by = \"id\") %>%\n  select(id, doc_senti, doc_confi_posi, doc_confi_neut, doc_confi_neg)\n\ndb_sent_f <- db_sent_1b %>%\n  left_join(db_sent_2b, by = \"id\") %>%\n  mutate(\n    senti_label_google = case_when(\n      between(senti_score_google, 0.25, 1) ~ \"긍정\",\n      between(senti_score_google, -0.25, 0.25) ~ \"중립\",\n      TRUE ~ \"부정\"),\n    senti_label_naver = case_when(\n      doc_senti == \"positive\" ~ \"긍정\",\n      doc_senti == \"neutral\" ~ \"중립\",\n      TRUE ~ \"부정\")\n    )\n\ndata.table(db_sent_f)[label == \"부정\" & senti_label_naver == \"중립\"][\n  , .(id, sent_content, label, senti_label_naver, doc_confi_posi, doc_confi_neut, doc_confi_neg)]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     id                       sent_content label senti_label_naver\n 1: 210       힐링하러 갔다가 헬링 당한 곳  부정              중립\n 2: 216             타는 장소도 너무 멀고,  부정              중립\n 3: 217       인파도 많고 난잡하기도 하다.  부정              중립\n 4: 221       입장료가 비싼편이라 생각해요  부정              중립\n 5: 226          살짝 실망스러운 모습이라.  부정              중립\n 6: 230                  넘 사람들이 많다.  부정              중립\n 7: 231                인성개씨발동네 ㄹㅇ  부정              중립\n 8: 236           노잼이고 막 볼것도 없다.  부정              중립\n 9: 246              불볕더위에 땡볓이지만  부정              중립\n10: 251                   주차장이 없어요.  부정              중립\n11: 260          대중교통이 차라리 나아요.  부정              중립\n12: 269            걍 집에서 잠이나 자세요  부정              중립\n13: 271         지금 시즌은 별로인 듯해요.  부정              중립\n14: 274                     주차장 비좁음.  부정              중립\n15: 275                      밤엔 넘 춥다.  부정              중립\n16: 277                     사람 너무많다.  부정              중립\n17: 279    기대가 커서 그런가 실망도 크다.  부정              중립\n18: 280 볼것도없고그냥뭐동네뒷산갔다온느낌  부정              중립\n19: 302                      너무 사람많음  부정              중립\n20: 310                주차 완전 힘듭니다.  부정              중립\n21: 315          주차가 가장 짜증 났습니다  부정              중립\n22: 316                  개선이 필요합니다  부정              중립\n23: 325                        극악의 주차  부정              중립\n24: 335                차도 너무 막혔네요.  부정              중립\n25: 340                주차 진짜 쒯입니다.  부정              중립\n26: 341      맞기라도 하면.상상도 싫으네요  부정              중립\n27: 343         저녁 때 사람이 많긴 하지만  부정              중립\n28: 358           시설이 노후됫습니다 ㅠㅜ  부정              중립\n29: 360              리모델링이 시급하네요  부정              중립\n30: 363   ㅜㅠ 바람도 춥고 해서 아쉬웠네요  부정              중립\n31: 364         집회때문에 너무 불편했어요  부정              중립\n32: 365   광장에 사람들이 넘 많이 모였어요  부정              중립\n33: 372                       쓰레기냄새남  부정              중립\n34: 373                  의자도 별로 없고,  부정              중립\n35: 381                사람구경만 졸라하다  부정              중립\n36: 391                    찾는 이가 없음.  부정              중립\n37: 396                       주차공간협소  부정              중립\n38: 398                            주차 헬  부정              중립\n     id                       sent_content label senti_label_naver\n    doc_confi_posi doc_confi_neut doc_confi_neg\n 1:    0.002516054       99.99630   0.001187555\n 2:    0.076974176       97.06975   2.853277200\n 3:    0.064776120       99.74305   0.192171300\n 4:    0.008725748       99.98264   0.008629889\n 5:    0.100952960       99.67683   0.222217780\n 6:    0.271925180       98.22211   1.505968600\n 7:    0.123892054       93.11234   6.763764400\n 8:    0.023809950       99.92928   0.046910760\n 9:    0.066535760       99.89360   0.039866920\n10:    0.006073157       99.67338   0.320546840\n11:    0.062801205       99.88726   0.049936870\n12:    0.392281380       99.26622   0.341496530\n13:    0.023040438       99.92218   0.054779444\n14:    0.789424060       61.47467  37.735905000\n15:    0.002088725       99.99641   0.001495643\n16:    0.145121800       99.69920   0.155682190\n17:    0.055910440       99.67062   0.273466380\n18:    0.309557470       99.57802   0.112426504\n19:    0.017323079       99.94631   0.036366973\n20:    0.601401900       97.76577   1.632826100\n21:    0.789424060       61.47467  37.735905000\n22:    0.496102060       99.48928   0.014619959\n23:    0.193368870       99.60049   0.206140460\n24:    0.022184083       99.87048   0.107330120\n25:    0.021959830       99.90194   0.076099320\n26:    0.004861866       99.98780   0.007340889\n27:    0.017429445       96.66999   3.312579900\n28:    0.091496530       99.81611   0.092393720\n29:    0.070926390       99.47028   0.458789140\n30:    0.351080270       98.24281   1.406106100\n31:    0.026297357       99.95812   0.015587593\n32:    0.430049840       93.90658   5.663370600\n33:    0.068197310       99.88186   0.049946714\n34:    0.265411100       99.56754   0.167052850\n35:    0.660176630       92.43296   6.906865600\n36:    0.182308810       99.71406   0.103631936\n37:    0.036754236       99.89362   0.069629155\n38:    0.248254840       99.72199   0.029763816\n    doc_confi_posi doc_confi_neut doc_confi_neg\n```\n:::\n:::\n\n\n\n\n\n\n\n### 구글 감성분석\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_confusion_matrix(conf_mat_google$`Confusion Matrix`[[1]], \n                      class_order = c(\"긍정\", \"중립\", \"부정\"),\n                      add_sums = TRUE)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in plot_confusion_matrix(conf_mat_google$`Confusion Matrix`[[1]], :\n'ggimage' is missing. Will not plot arrows and zero-shading.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in plot_confusion_matrix(conf_mat_google$`Confusion Matrix`[[1]], :\n'rsvg' is missing. Will not plot arrows and zero-shading.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in plot_confusion_matrix(conf_mat_google$`Confusion Matrix`[[1]], :\n'ggnewscale' is missing. Will not use palette for sum tiles.\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n#### 구글 감성분석 parameter\n\n문장별로 감성점수를 제공하는 구글 자연어처리 서비스에서 점수를 긍정과 부정, 중립으로 나누는 기준이 모호하다는 생각이 들었다. 아래 예시와 같이, '싸늘하다' 등은 부정적으로 느껴지지만 구글 감성점수 기준에서는 중립에 속한다.\n\n![](image/ex_google_senti.png){width=\"80%\"}\n\n긍정과 긍정을 결정하는 기준을 다르게해서 구글 감성분석 라벨을 다시 매겨보았다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlist_parameter <- expand.grid(\n  threshold_posi = seq(0.25, 0.95, 0.05),\n  threshold_neg = seq(0.25, -0.95, -0.05)) %>%\n  mutate(id = row_number()) %>%\n  group_split(id)\n\nresult_senti_google_param <- rbindlist(future_map(\n  list_parameter, function(x){\n    \n    \n    db_sent_f <- db_sent_1b %>%\n      left_join(db_sent_2b, by = \"id\") %>%\n      mutate(\n        senti_label_google = case_when(\n          between(senti_score_google, x$threshold_posi, 1) ~ \"긍정\",\n          between(senti_score_google, -1, x$threshold_neg) ~ \"부정\",\n          TRUE ~ \"중립\")) %>%\n      select(id, sent_content, senti_label_google, label) %>%\n      mutate_at(c(\"senti_label_google\", \"label\"), factor, levels = c(\"부정\", \"중립\", \"긍정\"))\n    \n    conf_mat_google <- confusion_matrix(\n      targets = db_sent_f$label,\n      predictions = db_sent_f$senti_label_google)\n    \n    out <- cbind(x, F1 = conf_mat_google$F1, `Balanced Accuracy` = conf_mat_google$`Balanced Accuracy`)\n  }\n  \n))\n```\n:::\n\n\n내가 매긴 라벨이 정답이라는 가정 하에, 기준 값을 조정하면 F1 점수는 0.7181로 기준 0.5534에서 높아진다.\n\n\n::: {.cell}\n::: {.cell-output-display}\n|  id|F1     | threshold_posi| threshold_neg|\n|---:|:------|--------------:|-------------:|\n| 127|0.7181 |           0.55|         -0.15|\n| 128|0.7181 |           0.60|         -0.15|\n| 142|0.7181 |           0.55|         -0.20|\n| 143|0.7181 |           0.60|         -0.20|\n| 129|0.7174 |           0.65|         -0.15|\n:::\n:::\n\n\n### 잘못분류한 문장들\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-3b902a9c22049d18e248\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-3b902a9c22049d18e248\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\",\"59\",\"60\",\"61\",\"62\"],[202,204,205,210,215,216,218,219,222,223,228,230,234,245,249,254,256,272,273,274,275,278,280,281,284,289,290,293,294,296,303,306,309,310,318,321,322,325,329,335,337,339,342,349,350,353,354,355,356,357,358,360,362,367,369,376,378,380,381,384,389,398],[\"시끄럽고 번잡하지만\",\"관리는 소흘해지는듯\",\"그냥 사람 많음\",\"힐링하러 갔다가 헬링 당한 곳\",\"주차장이 좁아요\",\" 타는 장소도 너무 멀고,\",\"시민의식 결여.\",\"정비가 시급하다\",\"기다리다가 지침\",\"먹거리 메뉴가 다양치 않고 비쌈.\",\"먼지바람 개쩜\",\"넘 사람들이 많다.\",\"주차공간이 턱없이 부족함.\",\"사람이 느므느므 많으다\",\"이용료가 너무 비싸다\",\"그것이 많이 아쉬웠습니다.\",\"단 매우 붐빔\",\"조잡함. 부조화의 극치\",\"사람 겁나 많아\",\"주차장 비좁음.\",\"밤엔 넘 춥다.\",\"화장실 관리가 필요할거 같네요\",\"볼것도없고그냥뭐동네뒷산갔다온느낌\",\"너무 비싸 사지 못했는데\",\"뭔가 괴랄함.\",\"주변 지저분 소규모\",\"더울때 절때 가지 마세욧!\",\"동물들이 불쌍해요\",\"그만 오세요\",\"주차와.화장실.적었어요\",\"ㅠ 어린이날 좀 속상했어요.\",\"그곳 비추천합니다.\",\"너무 복잡해요.\",\"주차 완전 힘듭니다.\",\"사람이 느므느므 많아요.\",\"주차는 정말 개선되어야함\",\"너무 시끄럽네요.\",\"극악의 주차\",\"그냥 별로임\",\"차도 너무 막혔네요.\",\"꽃을 쑥대밭으로 만들어놓음.\",\"꽃가루 너무 심해요 ㅠㅠ\",\"너무 더웠네요.\",\"박정희 흉상 당장 부셔버려라\",\"넘 안쓰러웠어요.\",\"사람이 너무너무너무 많아요\",\"코스가 아주 단조로움\",\" 교통,주차 너무힘들어요\",\"축제?때 가는건 강력반댈쎄.\",\"세금 겉어서 선심 잔치 하는곳 .\",\"시설이 노후됫습니다 ㅠㅜ\",\"리모델링이 시급하네요\",\"늘 시위대로 시끄러운 곳.\",\"주차가 개판임.\",\"ㅋㅋ 주차 지옥\",\"재밌어 보이진 않음\",\"농구장이 다 망가졌어요\",\"조금 번잡하고 시끄러워요\",\"사람구경만 졸라하다\",\"비가오니 할게 별로 없음\",\"자동차 소음은 좀 있습니다.\",\"주차 헬\"],[\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\",\"부정\"],[\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\",\"중립\"],[0.200000003,-0.100000001,-0.200000003,-0.100000001,-0.100000001,0.100000001,0,-0.100000001,0,0,0,0,-0.200000003,0,-0.100000001,0,0,0.200000003,0.100000001,-0.200000003,0.200000003,-0.200000003,-0.200000003,0.100000001,-0.100000001,0.200000003,0.100000001,0,0,0.100000001,-0.200000003,0.100000001,0.100000001,0,-0.200000003,0,0.100000001,0.200000003,0,0,0,0,0,0.200000003,0.200000003,-0.200000003,0.200000003,0,0,0,-0.100000001,0.100000001,0,0,-0.100000001,0.200000003,0,0.100000001,0,0,0,0.100000001]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>id<\\/th>\\n      <th>sent_content<\\/th>\\n      <th>label<\\/th>\\n      <th>senti_label_google<\\/th>\\n      <th>senti_score_google<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"pageLength\":5,\"lengthMenu\":[10,20,50],\"dom\":\"tp\",\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,5]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/datatables-binding-0.27/datatables.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\r\n<link href=\"../../site_libs/dt-core-1.12.1/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\r\n<link href=\"../../site_libs/dt-core-1.12.1/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/dt-core-1.12.1/js/jquery.dataTables.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}